---
cluster: "alvis"
form:
  - cluster
  - bc_account
  - bc_num_hours
  - node_type
  - version
  - working_dir
  - bc_email_on_started
attributes:
  bc_account:
    widget: "select"
    label: "Project"
    options: [<%= SlurmData.accounts.join(', ') %>]
  node_type:
    widget: "select"
    label: "Node type"
    options:
      - [ "T4:1", "T4:1", data-option-for-alvis: true ]
      - [ "T4:2", "T4:2", data-option-for-alvis: true ]
      - [ "T4:3", "T4:3", data-option-for-alvis: true ]
      - [ "T4:4", "T4:4", data-option-for-alvis: true ]
      - [ "T4:5", "T4:5", data-option-for-alvis: true ]
      - [ "T4:6", "T4:6", data-option-for-alvis: true ]
      - [ "T4:7", "T4:7", data-option-for-alvis: true ]
      - [ "T4:8", "T4:8", data-option-for-alvis: true ]
      - [ "A40:1", "A40:1", data-option-for-alvis: true ]
      - [ "A40:2", "A40:2", data-option-for-alvis: true ]
      - [ "A40:3", "A40:3", data-option-for-alvis: true ]
      - [ "A40:4", "A40:4", data-option-for-alvis: true ]
      - [ "A100:1", "A100:1", data-option-for-alvis: true ]
      - [ "A100:2", "A100:2", data-option-for-alvis: true ]
      - [ "A100:3", "A100:3", data-option-for-alvis: true ]
      - [ "A100:4", "A100:4", data-option-for-alvis: true ]
      - [ "V100:1", "V100:1", data-option-for-alvis: true ]
      - [ "V100:2", "V100:2", data-option-for-alvis: true ]
      - [ "V100:3", "V100:3", data-option-for-alvis: true ]
      - [ "V100:4", "V100:4", data-option-for-alvis: true ]
      - [ "A100fat:1", "A100fat:1", data-option-for-alvis: true ]
      - [ "A100fat:2", "A100fat:2", data-option-for-alvis: true ]
      - [ "A100fat:3", "A100fat:3", data-option-for-alvis: true ]
      - [ "A100fat:4", "A100fat:4", data-option-for-alvis: true ]

  version:
    widget: "select"
    label: "Runtime"
    options:
<% glob_prettify_lookup(["/apps/portal/rstudio/*.sh"]).each do |path| %>
      - [ "<%= path %>", "<%= path %>" ]
<% end %>
      - [ "== User specified (create ~/portal/rstudio/*.sh) ==",  "" ]
<% glob_prettify_lookup(["#{Dir.home}/portal/rstudio/*.sh"]).each do |path| %>
      - [ "<%= path %>", "<%= path %>" ]
<% end %>
    help: "See https://github.com/c3se/bc_alvis_rstudio for custom applications"
  working_dir:
    label: "Working Directory"
    data-filepicker: true
    data-target-file-type: dirs  # Valid values are: files, dirs, or both
    readonly: false
    help: "Select your project directory; defaults to $HOME"
